<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>责任与措施</title><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="description" content="DESCRIPTION"><meta name="keywords" content="KEYWORDS"><meta name="author" content="AUTHOR"><link rel="stylesheet" href="[object global]/css/bootstrap.css"><style>body {
  padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
}
#github{
  z-index:10000;
  position:fixed;
  left:0;
  top:0;
}</style><link rel="stylesheet" href="[object global]/css/bootstrap-responsive.css"></head><body><div class="navbar navbar-inverse navbar-fixed-top"><div class="navbar-inner"><div class="container"><a data-toggle="collapse" data-target=".nav-collapse" class="btn btn-navbar"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></a><a href="[object global]/" class="brand">WEB前端安全原理介绍和演示：XSS与CSRF</a><div class="nav-collapse collapse"><ul class="nav"><li><a href="[object global]/1.4.xss-ongoing/">XSS进行时</a></li><li><a href="[object global]/2.3.csrf-ongoing/">CSRF进行时</a></li></ul></div></div></div></div><div class="container"><artical><h1>责任与措施</h1>
<p>用户、浏览器、服务器、数据库</p>
<p>谁被误导了？被谁误导了？</p>
<p>用户被误导了，被浏览器误导了。</p>
<p>服务器被误导了？被HTTP误导了</p>
<h2>无效的防护措施</h2>
<ul>
<li>只接收post请求</li>
</ul>
<p>总有站点用了Frame/IFrame</p>
<p>Flash/Silverlight/AdobeAir等与浏览器共享Cookie的插件</p>
<p>使用了类WebClient控件的传统应用程序也可能和浏览器共享Cookie</p>
<ul>
<li>增加业务的步骤 ： 只是增加了攻击的难度</li>
</ul>
<h2>有效的防护措施</h2>
<ul>
<li>验证HTTP Referer</li>
</ul>
<p>不推荐：</p>
<pre><code>HTTP协议规定GET请求是无状态的，所以Referer的实现不稳定。
HTTPS下Referer不可用。
造成编程依赖/检查时容易出错。</code></pre>
<ul>
<li>同步令牌模式(Synchronizer Token Pattern)</li>
</ul>
<p>通过特殊令牌验证会话的有效性，该令牌应该是临时性的，并且不应该存放在浏览器。(例如：ASP.NET中的VIEWSTATE)</p>
<p>令牌只在页面上进行分发,并且要在所有页面上进行分发。</p>
<h2>提问环节</h2>
<p><a href="thankyou.html">NEXT</a></p>
</artical><footer><p>© 2012  YOURNAME</p></footer></div><script src="[object global]/js/jquery.js"></script><script src="[object global]/js/bootstrap.js"></script><script src="[object global]/js/modernizr.js"></script><a id="github" href="https://github.com/layerssss/markem/blob/master/2.4.responsibility-and-preventions.md"><img src="http://s3.amazonaws.com/github/ribbons/forkme_left_red_aa0000.png" alt="Fork me on GitHub"></a></body></html>