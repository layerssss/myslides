<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>【复习】SQL注入</title><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="description" content="DESCRIPTION"><meta name="keywords" content="KEYWORDS"><meta name="author" content="AUTHOR"><link rel="stylesheet" href="../css/bootstrap.css"><style>body {
  padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
}
#github{
  z-index:10000;
  position:fixed;
  left:0;
  top:0;
}</style><link rel="stylesheet" href="../css/bootstrap-responsive.css"></head><body><div class="navbar navbar-inverse navbar-fixed-top"><div class="navbar-inner"><div class="container"><a data-toggle="collapse" data-target=".nav-collapse" class="btn btn-navbar"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></a><a href="../" class="brand">Hello</a><div class="nav-collapse collapse"><ul class="nav"><li><a href="../jadeless/">jadeless</a></li><li><a href="../clientsec/">WEB前端安全原理介绍和演示：XSS与CSRF</a></li><li><a href="../trigitorious/">Git &amp; Github &amp; pansafe.github.com</a></li></ul></div></div></div></div><div class="container"><artical><h1>【复习】SQL注入</h1>
<h2>&quot;or 1=1&quot;漏洞</h2>
<pre><code>sql=&quot;select * from [users] where username=&#39;&quot;&amp;username&amp;&quot;&#39; and password=&#39;&quot;&amp;password&amp;&quot;&#39; &quot;
rs.open conn,sql,1,3
if rs.next then
...</code></pre>
<p>如果让username的值为

</p>
<pre><code>&#39; or 1=1 --(MS SQL Server的单行注释符)</code></pre>
<p>则SQL语句便为

</p>
<pre><code>select * from [users] where username=&#39;&#39; or 1=1 --(后面是什么已经不重要了因为已经被注释了)...</code></pre>
<p>然后你懂的！

</p>
<h2>防范方法</h2>
<ul>
<li>过滤拼装SQL语句所用的变量</li>
<li><p>参数化查询</p>
<p>  sql=&quot;select * from [users] where username=@username and password=@password &quot;</p>
<h1>本质是避免字符串拼装，而使用透明的协议传输参数</h1>
</li>
</ul>
<p><a href="1.3.rich-content-and-vulnerable-client.md">NEXT</a></p>
</artical><footer><p>© 2012  YOURNAME</p></footer></div><script src="../js/jquery.js"></script><script src="../js/bootstrap.js"></script><script src="../js/modernizr.js"></script><a id="github" href="https://github.com/layerssss/markem/blob/master/clientsec/1.2.sql-injection.md"><img src="http://s3.amazonaws.com/github/ribbons/forkme_left_red_aa0000.png" alt="Fork me on GitHub"></a></body></html>